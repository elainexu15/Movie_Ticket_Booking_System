{% extends 'cus_home.html' %}

{% block content %}
<div class="container">
    <div class="row mt-2">
        <div class="col-2"></div>
        <div class="col-8">
            <h2 class="mb-4 text-center">CHECKOUT</h2>
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title mb-4">Movie Information</h5>
                    <p class="card-text"><strong>Title:</strong> {{ booking.movie.title }}</p>
                    <p class="card-text"><strong>Screening Date:</strong>  {{ booking.screening.screening_date }}</p>
                    <p class="card-text"><strong>Start Time:</strong>  {{ booking.screening.start_time }}</p>
                </div>
            </div>
            <div class="card mt-3">
                <div class="card-body">
                    <h5 class="card-title">Selected Seats</h5>
                    <ul>
                        {% for seat in booking.selected_seats %}
                            <li>
                                Row {{ seat.row_number }}, Seat {{ seat.seat_number }}
                                <span class="float-right">Price: ${{ seat.seat_price }}</span>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            <div class="card mt-3">
                <div class="card-body">
                    <h5 class="card-title">Total Price</h5>
                    <p>Total Price: ${{ booking.total_amount }}</p>
                </div>
            </div>
            <form method="POST" action="{{ url_for('views.validate_coupon', booking_id = booking.booking_id) }}">
                <input type="hidden" name="booking_id" value="{{ booking.booking_id }}">
                <div class="card mt-3">
                    <div class="card-body">
                        <h5 class="card-title">Apply Coupon</h5>
                        <p>Enter your coupon code:</p>
                        <div class="input-group">
                            <input type="text" class="form-control" name="coupon_code" placeholder="Coupon code">
                            <div class="input-group-append">
                                <button type="submit" class="btn btn-primary">Apply</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            
            <div class="mt-3">
                <a href="{{ url_for('views.customer_payment', booking_id = booking.booking_id)}}"
                    class="btn btn-primary">Proceed to Payment</a>
            </div>
        </div>
        <div class="col-2"></div>
    </div>
</div>
{% endblock %}
